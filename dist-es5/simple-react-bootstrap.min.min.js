import React,{Children,Component,cloneElement,createElement}from"react";import{findDOMNode,render,unmountComponentAtNode}from"react-dom";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},objectWithoutProperties=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},toConsumableArray=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},ButtonDropdown=function(e){function t(){var e,n,r;classCallCheck(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=r=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={open:!1},r.documentClick=function(e){var t=void 0;if(r.toggleBtn&&(t=r.toggleBtn instanceof Component?findDOMNode(r.toggleBtn):r.toggleBtn),!t||!t.contains(e.target)){var n=void 0!==r.props.open?r.props.open:r.state.open,a=r.props.keepOpenIfItemClickedNoLongerInDocument;if(n){if(r.props.ignoreContentClick){var o=void 0;if(r.contentMenu&&(o=r.contentMenu instanceof Component?findDOMNode(r.contentMenu):r.contentMenu),o&&o.contains(e.target))return;if(a&&!document.contains(e.target))return}r.props.onToggle?r.props.onToggle(e):r.toggle()}}},r.toggle=function(){return r.setState({open:!r.state.open})},possibleConstructorReturn(r,n)}return inherits(t,Component),createClass(t,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.documentClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.documentClick)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.className,a=void 0===r?"":r,o=t.containerElementType,s=void 0===o?"div":o,i=t.disabled,l=void 0!==i&&i,c=(t.ignoreContentClick,t.deferDropdownRendering,t.onToggle,t.open,t.clean),u=(t.keepOpenIfItemClickedNoLongerInDocument,objectWithoutProperties(t,["children","className","containerElementType","disabled","ignoreContentClick","deferDropdownRendering","onToggle","open","clean","keepOpenIfItemClickedNoLongerInDocument"]));if(!Array.isArray(n))throw"Error - at least two children should be passed: a toggle, and dropdown menu, at a minimum";var d=void 0,p=void 0,h="",m="";2===n.length?(d=n[0],p=n[1],h=" dropdown-toggle ",m=" dropdown-menu  "):(d=n.find(function(e){return e&&e.props&&/\bdropdown-toggle\b/.test(e.props.className)}),p=n.find(function(e){return e&&e.props&&/\bdropdown-menu\b/.test(e.props.className)}));var f=c?"":" btn-group ",v=void 0;if(d){var b=this.props.onToggle||(void 0===this.props.open?this.toggle:function(){}),g=d.props.onClick?function(e){l||(d.props.onClick(),b(e))}:l?function(){}:b;v=React.cloneElement(d,{className:h+(d.props.className||""),onClick:g,ref:function(t){return e.toggleBtn=t}})}var C=void 0;p&&(C=React.cloneElement(p,{className:m+(p.props.className||""),ref:function(t){return e.contentMenu=t}}));var y=void 0!==this.props.open?this.props.open:this.state.open,_=[a,f,y?"open":null].filter(function(e){return e}).join(" ");if(2===n.length)return createElement(s,_extends({className:_},u),React.cloneElement(v,{disabled:l}),!this.props.deferDropdownRendering||y?C:null);var N=[].concat(toConsumableArray(n));return d&&N.splice(N.indexOf(d),1,v),p&&N.splice(N.indexOf(p),1,!this.props.deferDropdownRendering||y?C:null),createElement.apply(void 0,[s,_extends({className:_},u)].concat(toConsumableArray(N)))}}]),t}(),spreadClassNames=function(e,t){return(t||"")+" "+(e||"")},ModalHeader=function(e){var t=e.className,n=void 0===t?"":t,r=(e.children,objectWithoutProperties(e,["className","children"]));return React.createElement("div",_extends({className:"modal-header "+n},r),e.children)},ModalFooter=function(e){var t=e.className,n=void 0===t?"":t,r=(e.children,objectWithoutProperties(e,["className","children"]));return React.createElement("div",_extends({className:"modal-footer "+n},r),e.children)},ModalBody=function(e){var t=e.className,n=void 0===t?"":t,r=(e.children,objectWithoutProperties(e,["className","children"]));return React.createElement("div",_extends({className:"modal-body "+n},r),e.children)},currentModals=[],ESC_KEY=27;function removeBackdrop(){var e=document.getElementsByClassName("simple-react-modal-backdrop")[0];e&&(e.classList.remove("simple-react-modal-backdrop"),/\bfade\b/.test(e.className)?(e.classList.remove("in"),setTimeout(function(){return e.parentNode.removeChild(e)},200)):e.parentNode.removeChild(e))}window.addEventListener("keydown",function(e){(e.keyCode||e.which)==ESC_KEY&&currentModals.length&&currentModals[currentModals.length-1].props.onHide()});var uuid=1,Modal=function(e){function t(){var e,n,r;classCallCheck(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=r=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.portalState={exists:!1,hasInCssClass:!1},r.mergePortalState=function(e,t){Object.assign(r.portalState,e),r.renderModal(t)},r.__showingUid=0,r.__bumpUid=function(){return r.__showingUid++},r.modalClick=function(e){currentModals[currentModals.length-1]===r&&e.target===e.currentTarget&&r.props.onHide()},r.initialMount=function(e){e&&(r.modalRef=e,r.props.show&&r._showModal())},r._hideModal=function(){r.__bumpUid();var e=r.__showingUid;/\bfade\b/.test(r.modalRef.className)?(r.mergePortalState({hasInCssClass:!1}),setTimeout(function(){e===r.__showingUid&&r.mergePortalState({exists:!1})},200)):r.mergePortalState({hasInCssClass:!1,exists:!1}),currentModals.length<=1&&(document.body.classList.remove("modal-open"),removeBackdrop()),currentModals[currentModals.length-1]==r&&currentModals.pop()},possibleConstructorReturn(r,n)}return inherits(t,e),createClass(t,[{key:"componentDidMount",value:function(){this.__div=document.createElement("div"),this.__div.id="__simple-react-bootstrap-modal"+uuid++,document.body.appendChild(this.__div),this.renderModal()}},{key:"componentDidUpdate",value:function(e,t){!e.show&&this.props.show?this._showModal():e.show&&!this.props.show?this._hideModal():this.renderModal()}},{key:"_showModal",value:function(){var e=this;this.__bumpUid();var t,n=this.__showingUid,r=currentModals.length?null:document.createElement("div"),a=/\bfade\b/.test(this.modalRef.className);if(r&&(t=r.classList).add.apply(t,["modal-backdrop","simple-react-modal-backdrop",a?"fade":"in"]),a){r&&document.body.appendChild(r);var o=function(e){return window.__requestAnimationFrame?requestAnimationFrame(e):setTimeout(e,2)};this.mergePortalState({exists:!0},function(){return o(function(){return e.mergePortalState({hasInCssClass:!0})})}),o(function(){r&&r.classList.add("in"),document.body.classList.add("modal-open")}),setTimeout(function(){n===e.__showingUid&&currentModals.push(e)},200)}else r&&document.body.appendChild(r),this.mergePortalState({exists:!0,hasInCssClass:!0}),currentModals.push(this),document.body.classList.add("modal-open")}},{key:"render",value:function(){return React.createElement("div",null)}},{key:"renderModal",value:function(e){var t=this.props,n=t.children,r=t.manual,a=(t.show,t.onHide,t.className),o=t.style,s=objectWithoutProperties(t,["children","manual","show","onHide","className","style"]);render(React.createElement("div",_extends({ref:this.initialMount,onClick:this.modalClick,className:spreadClassNames(a,"modal "+(this.portalState.hasInCssClass?"in":"")),style:_extends({},o,{display:this.portalState.exists?"block":""})},s,{role:"dialog"}),r?n:React.createElement("div",{className:"modal-dialog"},React.createElement("div",{className:"modal-content"},n))),this.__div,e)}},{key:"componentWillUnmount",value:function(){var e=this,t=currentModals.indexOf(this);this.props.show&&this._hideModal(),t>=0&&(currentModals.splice(t,1),currentModals.length||removeBackdrop()),setTimeout(function(){unmountComponentAtNode(e.__div),setTimeout(function(){return document.body.removeChild(e.__div)},100)},1e3)}}]),t}(React.Component);Modal.Body=ModalBody,Modal.Header=ModalHeader,Modal.Footer=ModalFooter;var COLLAPSE_TIMEOUT=355,spreadClassNames$1=function(){for(var e=arguments.length,t=Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")+" "+t.join(" ")},NavBarForm=function(e){var t=e.className,n=e.style,r=objectWithoutProperties(e,["className","style"]);return React.createElement("form",_extends({onSubmit:function(e){return e.preventDefault()},className:spreadClassNames$1(t,"navbar-form"),style:n},r),e.children)},NavBarBrand=function(e){return React.cloneElement(e.children,{className:"navbar-brand",key:"nav-bar-brand"})},NavBarToggle=function(e){return React.createElement("button",_extends({},e,{type:"button",className:"navbar-toggle collapsed"}),React.createElement("span",{className:"sr-only"},"Toggle navigation"),React.createElement("span",{className:"icon-bar"}),React.createElement("span",{className:"icon-bar"}),React.createElement("span",{className:"icon-bar"}))},NavBarHeader=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.onClick;return React.createElement("div",{className:"navbar-header",ref:function(t){return e.el=t}},React.Children.map(n,function(e){return e.type===NavBarToggle?React.cloneElement(e,{onClick:r,key:"nav-bar-toggle"}):e}))}}]),t}(React.Component),NavBarItem=function(e){var t=e.disabled,n=e.className,r=e.active,a=e.href,o=e.children,s=objectWithoutProperties(e,["disabled","className","active","href","children"]);return React.createElement("li",_extends({disabled:!!t,className:spreadClassNames$1(n,t?"disabled":"",r?"active":"")},s),React.createElement("a",{href:a},o))},NavBarItemDivider=function(e){return React.createElement("li",{role:"separator",className:"divider"})},NavBarDropdown=function(e){var t=e.toggleClassName,n=e.style,r=e.disabled,a=e.text,o=e.children,s=e.ignoreContentClick,i=void 0!==s&&s,l=objectWithoutProperties(e,["toggleClassName","style","disabled","text","children","ignoreContentClick"]);return React.createElement(ButtonDropdown,{containerElementType:"li",clean:!0,ignoreContentClick:i,className:"dropdown "+(r?"disabled":""),disabled:!!r},React.createElement("a",_extends({className:spreadClassNames$1(t,"dropdown-toggle"),style:n||{}},l),a," ",React.createElement("span",{className:"caret"})),React.createElement("ul",{className:"dropdown-menu"},o))},Nav=function(e){var t=e.className,n=void 0===t?"":t,r=objectWithoutProperties(e,["className"]);return React.createElement("ul",_extends({},r,{className:"nav navbar-nav "+n}),r.children)},NavBar=function(e){function t(){var e,n,r;classCallCheck(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=r=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={collapsed:!0,heightExpanded:!1,collapseHeight:null},r._clearAnimation=function(){r._pendingAnimationClear&&(clearTimeout(r._pendingAnimationClear),r._pendingAnimationClear=null)},r.closeIfOpen=function(){(r.state.expanding||r.state.expanded)&&r.close()},r.close=function(){r.setState({collapsing:!0,collapseHeight:null,expanding:!1,expanded:!1}),r._pendingAnimationClear=setTimeout(function(){r.setState({collapsing:!1,collapseHeight:null}),r._cachedHeight=null},COLLAPSE_TIMEOUT)},r.expand=function(){if(!r._cachedHeight){var e=r.headerEl.el.nextSibling;e.style.visibility="hidden",e.classList.add("in");var t=e.offsetHeight;e.style.visibility="",e.classList.remove("in"),r._cachedHeight=t}r.setState({collapsing:!0,expanding:!0}),setTimeout(function(){return r.setState({collapseHeight:r._cachedHeight})},2),r._pendingAnimationClear=setTimeout(function(){return r.setState({collapsing:!1,expanded:!0,expanding:!1})},COLLAPSE_TIMEOUT)},possibleConstructorReturn(r,n)}return inherits(t,e),createClass(t,[{key:"toggleMobileCollapse",value:function(){this._clearAnimation(),this.state.expanded||this.state.expanding?this.close():this.expand()}},{key:"componentWillUnmount",value:function(){clearTimeout(this._pendingAnimationClear)}},{key:"render",value:function(){var e=this,t=this.props.children.find(function(e){return e.type===NavBarHeader}),n=this.props.children.filter(function(e){return e!=t});t&&(t=React.cloneElement(t,{onClick:this.toggleMobileCollapse.bind(this),ref:function(t){return e.headerEl=t}}));var r=this.props,a=r.style,o=r.className,s=void 0===o?"":o,i=objectWithoutProperties(r,["style","className"]);return React.createElement("nav",_extends({className:"navbar navbar-default "+s,style:a},i),React.createElement("div",{className:"container-fluid"},t||null,React.createElement("div",{className:(this.state.collapsing?" collapsing ":" collapse ")+" navbar-collapse "+(this.state.expanded?" in ":""),style:{height:this.state.collapseHeight||null}},n)))}}]),t}(React.Component);NavBar.Nav=Nav,NavBar.Item=NavBarItem,NavBar.ItemDivider=NavBarItemDivider,NavBar.Header=NavBarHeader,NavBar.Brand=NavBarBrand,NavBar.Toggle=NavBarToggle,NavBar.Dropdown=NavBarDropdown,NavBar.Form=NavBarForm;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function _objectWithoutProperties(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Tabs$2=function(e){function t(){var e,n,r;_classCallCheck(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=r=_possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={currentTab:r.props.defaultTab},r.tabSelect=function(e){r.isControlled?r.props.onChangeTab&&r.props.onChangeTab(e):r.setState(function(){return{currentTab:e}})},r.isControlled=void 0!==r.props.tab||void 0!==r.props.onChangeTab,_possibleConstructorReturn(r,n)}return _inherits(t,Component),_createClass(t,[{key:"componentWillMount",value:function(){var e=this,t=function(t){function n(){var t,r,a;_classCallCheck(this,n);for(var o=arguments.length,s=Array(o),i=0;i<o;i++)s[i]=arguments[i];return r=a=_possibleConstructorReturn(this,(t=n.__proto__||Object.getPrototypeOf(n)).call.apply(t,[this].concat(s))),a.onClick=function(t){t.preventDefault(),a.props.onClick&&a.props.onClick(),e.tabSelect(a.props.tab)},_possibleConstructorReturn(a,r)}return _inherits(n,Component),_createClass(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=(e.onClick,e.href),r=e.tab;return _objectWithoutProperties(e,["children","onClick","href","tab"]),React.createElement("a",{href:n||"#"+r,onClick:this.onClick},t)}}]),n}(),n=function(t){function n(){return _classCallCheck(this,n),_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return _inherits(n,Component),_createClass(n,[{key:"render",value:function(){var t=this.props,n=t.render,r=t.children,a={isActive:e.currentTab==this.props.tab};return n?n(a):cloneElement(Children.only(r),a)}}]),n}(),r=function(t){function n(){return _classCallCheck(this,n),_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return _inherits(n,Component),_createClass(n,[{key:"render",value:function(){var t=this.props,n=t.render,r=t.children,a={isActive:e.currentTab==this.props.tab};return e.currentTab==this.props.tab||this.props.renderInActiveTabs?n?n({isActive:e.currentTab==this.props.tab}):cloneElement(Children.only(r),a):null}}]),n}();this.TabLink=t,this.TabHeader=n,this.TabPane=r}},{key:"render",value:function(){return(0,this.props.children)({TabLink:this.TabLink,TabHeader:this.TabHeader,TabPane:this.TabPane})}},{key:"currentTab",get:function(){return this.isControlled?this.props.tab:this.state.currentTab}}]),t}(),Tab=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,Component),createClass(t,[{key:"render",value:function(){return null}}]),t}(),Tabs=function(e){function t(e){classCallCheck(this,t);var n=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.tabSelect=function(e){return n.setState({currentTab:e})};var r=Children.toArray(n.props.children)[0],a=n.props.defaultTab||r&&r.tab||0;return n.state={defaultTab:a},n}return inherits(t,Component),createClass(t,[{key:"render",value:function(){var e=Children.toArray(this.props.children).filter(function(e){return e.type==Tab}),t=this.props,n=t.headerClassname,r=void 0===n?"":n,a=t.headerStyle,o=void 0===a?{}:a;return React.createElement(Tabs$2,{tab:this.props.tab,onChangeTab:this.props.onChangeTab,defaultTab:this.state.defaultTab},function(t){var n=t.TabLink,a=t.TabHeader,s=t.TabPane;return React.createElement("div",null,React.createElement("ul",{className:"nav nav-tabs "+r,style:o},e.map(function(e,t){var r=e.props,o=r.name,s=r.className,i=void 0===s?"":s,l=(r.paneProps,r.caption),c=objectWithoutProperties(r,["name","className","paneProps","caption"]),u=o||t;return React.createElement(a,_extends({},c,{key:u,tab:u,render:function(r){var a=r.isActive;return React.createElement("li",_extends({},c,{className:(i||"")+" "+(a?" active ":"")}),React.createElement(n,{tab:e.props.name||t},l))}}))})),React.createElement("div",{className:"tab-content"},e.map(function(e,t){var n=e.props,r=n.name,a=(n.className,n.paneProps),o=void 0===a?{}:a,i=(objectWithoutProperties(n,["name","className","paneProps"]),o.classNamePane),l=void 0===i?"":i,c=objectWithoutProperties(o,["classNamePane"]),u=r||t;return React.createElement(s,{key:u,tab:u,render:function(t){var n=t.isActive;return React.createElement("div",_extends({},c,{className:l+" tab-pane "+(n?" active in ":"")}),e.props.children)}})})))})}}]),t}();export{ButtonDropdown,Modal,NavBar,Tabs,Tab};